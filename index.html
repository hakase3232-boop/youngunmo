<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜ìš´ëª¨ ë°”ë¡œê°€ê¸° ì„¤ì¹˜</title>

    <link rel="manifest" href="/youngunmo/manifest.json?v=8">
    <link rel="apple-touch-icon" href="/youngunmo/images/icon-192.png?v=8">
    <meta name="theme-color" content="#ffffff">

    <style>
        body { font-size: 1.5rem; font-family: 'Malgun Gothic', sans-serif; text-align: center; padding: 50px 20px; line-height: 1.6; background-color: #f5f5f5; color: #333; }
        .big-btn { font-size: 1.8rem; font-weight: bold; padding: 20px 40px; color: white; border: none; border-radius: 15px; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2); width: 100%; max-width: 400px; margin-top: 20px; }
        
        #androidSection button, #naverSection button { background-color: #03cf5d; } /* ì´ˆë¡ìƒ‰ */
        #iphoneSection button { background-color: #007aff; } /* íŒŒë€ìƒ‰ */

        /* ì²˜ìŒì—” ëª¨ë‘ ìˆ¨ê¹€ */
        .content-section { display: none; }
        
        #iphoneSection { background: white; border: 4px solid #007aff; border-radius: 20px; padding: 20px; margin-top: 20px; }
        .small-text { font-size: 1rem; color: #666; margin-top: 20px; }
    </style>
</head>
<body>

    <div id="main-content">
        <h2 style="font-size: 2.2rem; margin-bottom: 10px; color: #03cf5d;">ì˜ìš´ëª¨ ì¹´í˜</h2>
        
        <div id="androidSection" class="content-section">
            <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì•±ì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.</p>
            <button id="installButton" class="big-btn">ì˜ìš´ëª¨ ì•± ì„¤ì¹˜í•˜ê¸°</button>
        </div>

        <div id="naverSection" class="content-section">
            <p>âš ï¸ ë„¤ì´ë²„ ì•±ì—ì„œëŠ” ì„¤ì¹˜ê°€ ì•ˆ ë©ë‹ˆë‹¤.</p>
            <button id="goToChrome" class="big-btn">ì—¬ê¸°ë¥¼ ëˆŒëŸ¬ì„œ ì„¤ì¹˜í•˜ê¸°</button>
            <p class="small-text">ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¸Œë¼ìš°ì €ê°€ ì—´ë¦¬ë©´<br><b>[ì•± ì„¤ì¹˜í•˜ê¸°]</b>ë¥¼ ë‹¤ì‹œ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
        </div>

        <div id="iphoneSection" class="content-section">
            <p>ğŸ <b>ì•„ì´í° ì „ìš© ìë™ì„¤ì¹˜</b></p>
            <button id="installProfile" class="big-btn">ì•„ì´í° ë°”ë¡œê°€ê¸° ì„¤ì¹˜í•˜ê¸°</button>
            <p class="small-text" style="color:red; font-weight:bold;">
                [í—ˆìš©] í´ë¦­ í›„ [ì„¤ì •] ì•± ë§¨ ìœ„ì—ì„œ<br>
                'ë‹¤ìš´ë¡œë“œëœ í”„ë¡œíŒŒì¼'ì„ ëˆŒëŸ¬ ì„¤ì¹˜í•˜ì„¸ìš”!
            </p>
        </div>
    </div>

    <script>
        const CAFE_URL = "https://cafe.naver.com/truckerking"; 
        const MY_URL = "hakase3232-boop.github.io/youngunmo/"; 

        const userAgent = navigator.userAgent.toLowerCase();
        const isIos = /iphone|ipad|ipod/.test(userAgent);
        const isNaverApp = userAgent.indexOf('naver') !== -1;
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

        // [ì²´í¬] ì´ë¯¸ ì„¤ì¹˜í•´ì„œ ë“¤ì–´ì˜¨ ê²½ìš°
        if (isStandalone) {
            window.location.replace(CAFE_URL);
        }

        // --- ê¸°ê¸°ë³„ í™”ë©´ í‘œì‹œ ë¡œì§ ---

        if (isIos) {
            // ì•„ì´í°ì€ ë¬´ì¡°ê±´ ì•„ì´í° ì„¹ì…˜ë§Œ í‘œì‹œ
            document.getElementById('iphoneSection').style.display = 'block';
            document.getElementById('installProfile').onclick = () => {
                location.href = "/youngunmo/youngunmo.mobileconfig";
            };
        } 
        else if (isNaverApp) {
            // ì•ˆë“œë¡œì´ë“œ ë„¤ì´ë²„ ì•±ì´ë©´ ë¬´ì¡°ê±´ ë„¤ì´ë²„ ì„¹ì…˜ í‘œì‹œ
            document.getElementById('naverSection').style.display = 'block';
            document.getElementById('goToChrome').onclick = () => {
                location.href = "intent://" + MY_URL + "#Intent;scheme=https;package=com.android.chrome;end";
            };
        } 
        else {
            // ê·¸ ì™¸ ì•ˆë“œë¡œì´ë“œ í¬ë¡¬ ë“± (ì„¤ì¹˜ ìœ ë„)
            // ë¸Œë¼ìš°ì €ê°€ ì„¤ì¹˜ ê°€ëŠ¥í•˜ë‹¤ê³  íŒë‹¨í•  ë•Œë§Œ ë²„íŠ¼ì„ ë³´ì—¬ì£¼ë©´ ì•ˆ ëœ° ìˆ˜ ìˆìœ¼ë¯€ë¡œ, 
            // ì¼ë‹¨ ì„¹ì…˜ì„ ë³´ì—¬ì£¼ê³  ë²„íŠ¼ ì´ë²¤íŠ¸ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
            document.getElementById('androidSection').style.display = 'block';
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                const installBtn = document.getElementById('installButton');
                installBtn.onclick = () => { e.prompt(); };
            });

            // 5ì´ˆ ë’¤ì—ë„ ì„¤ì¹˜ë¥¼ ì•ˆ í•˜ë©´ ì¹´í˜ë¡œ ì´ë™
            setTimeout(() => { if(!isStandalone) window.location.href = CAFE_URL; }, 5000);
        }

        // ì„œë¹„ìŠ¤ ì›Œì»¤ (v8)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/youngunmo/service-worker.js?v=8');
        }
    document.getElementById('installProfile').onclick = function() {
    // ì˜ìš´ëª¨ ì•„ì´ì½˜ ì´ë¯¸ì§€ ë°ì´í„° (Base64)
    const iconBase64 = "iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABV7OTTAAAAAXNSR0IArs4c6QAAIABJREFUeF7tXQd8VNXWf+/M9BkSIAQSqhSpCkgVpYmiCApSBKRL7016E0KREnoL6S303nuvAtJ7701678mU99/3ZpIpgZBMmYTM/76Pr8m8mXvP2Wfvtda79p7D4fV6vS7uX+6fAn8SFPB4fA6vBOD+XfAnwZ8EBRwBHAHs/0XwJ0EBRwBHAH8p4E+C36OAnAD+UuOfBH8S4AjgLwP8SfD7FHAUAsC7p08Cl0sBR4DLpax7ry8o4AgA3719ErhcCjgCXC5l3Xt9QQFHANi9fRK4XAo4AlwuZd17fUE
    const profileContent = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PayloadContent</key>
    <array>
        <dict>
            <key>FullScreen</key><true/>
            <key>IsRemovable</key><true/>
            <key>Label</key><string>ì˜ìš´ëª¨</string>
            <key>PayloadDescription</key><string>ì˜ìš´ëª¨ ë°”ë¡œê°€ê¸°</string>
            <key>PayloadDisplayName</key><string>ì˜ìš´ëª¨</string>
            <key>PayloadIdentifier</key><string>com.youngunmo.shortcut</string>
            <key>PayloadType</key><string>com.apple.webClip.managed</string>
            <key>PayloadUUID</key><string>12345678-1234-1234-1234-1234567890ab</string>
            <key>PayloadVersion</key><integer>1</integer>
            <key>URL</key><string>https://cafe.naver.com/truckerking</string>
        </dict>
    </array>
    <key>PayloadDisplayName</key><string>ì˜ìš´ëª¨ ë°”ë¡œê°€ê¸° ì„¤ì¹˜</string>
    <key>PayloadIdentifier</key><string>com.youngunmo.profile</string>
    <key>PayloadType</key><string>Configuration</string>
    <key>PayloadUUID</key><string>abcdef12-abcd-abcd-abcd-abcdef123456</string>
    <key>PayloadVersion</key><integer>1</integer>
</dict>
</plist>`;

    // 2. ì•„ì´í°ì´ ì¸ì‹í•  ìˆ˜ ìˆëŠ” íŠ¹ìˆ˜í•œ í˜•ì‹(Blob)ìœ¼ë¡œ ë³€í™˜
    const blob = new Blob([profileContent], { type: 'application/x-apple-aspen-config' });
    const url = window.URL.createObjectURL(blob);

    // 3. ì•ˆë‚´ ë¬¸êµ¬ í‘œì‹œ
    const iphoneSection = document.getElementById('iphoneSection');
    iphoneSection.innerHTML = `
        <div style="background: #e7f3ff; border: 3px solid #007aff; padding: 20px; border-radius: 20px;">
            <p style="font-size: 1.5rem; color: #007aff; font-weight: bold;">ğŸ“¥ ì„¤ì¹˜ ì¤€ë¹„ ì™„ë£Œ!</p>
            <p style="font-size: 1.2rem; line-height: 1.5; color: #333;">
                ì ì‹œ í›„ ë‚˜íƒ€ë‚˜ëŠ” <b>[í—ˆìš©]</b> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.<br><br>
                ê·¸ ë‹¤ìŒ <b>[ì„¤ì •] ì•±</b> ë§¨ ìœ„ì—ì„œ<br>
                <b>'ë‹¤ìš´ë¡œë“œëœ í”„ë¡œíŒŒì¼'</b>ì„ ëˆŒëŸ¬ ì„¤ì¹˜í•˜ì„¸ìš”!
            </p>
        </div>
    `;

    // 4. ì¦‰ì‹œ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì‹¤í–‰
    const a = document.createElement('a');
    a.href = url;
    a.download = 'youngunmo.mobileconfig';
    a.click();
    window.URL.revokeObjectURL(url);
};
    </script>
</body>
</html>





