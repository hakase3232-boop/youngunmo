<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì˜ìš´ëª¨ ë°”ë¡œê°€ê¸° ì„¤ì¹˜</title>
    <style>
        body { font-size: 1.5rem; font-family: 'Malgun Gothic', sans-serif; text-align: center; padding: 30px 20px; background-color: #f5f5f5; color: #333; }
        .big-btn { font-size: 1.8rem; font-weight: bold; padding: 20px 40px; color: white; border: none; border-radius: 15px; cursor: pointer; box-shadow: 0 10px 20px rgba(0,0,0,0.2); width: 100%; max-width: 400px; margin-top: 10px; }
        #androidSection button { background-color: #03cf5d; }
        #iphoneSection button { background-color: #007aff; }
        .content-section { display: none; } /* ì²˜ìŒì—” ìˆ¨ê¹€ */
        .samsung-guide { background: #fff; border: 2px dashed #03cf5d; border-radius: 15px; padding: 15px; margin-top: 20px; display: none; }
    </style>
</head>
<body>

    <h2 style="font-size: 2.2rem; margin-bottom: 20px; color: #03cf5d;">ì˜ìš´ëª¨ ì¹´í˜</h2>

    <div id="androidSection" class="content-section">
        <p>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì•±ì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.</p>
        <button id="installButton" class="big-btn">ì˜ìš´ëª¨ ì•± ì„¤ì¹˜í•˜ê¸°</button>
        
        <div id="samsungGuide" class="samsung-guide">
            <p style="font-size: 1.1rem; margin: 0; color: #d32f2f; font-weight: bold;">âš ï¸ ì„¤ì¹˜ì°½ì´ ëœ¨ì§€ ì•ŠëŠ” ê²½ìš° (ì‚¼ì„±í°)</p>
            <p style="font-size: 1rem; margin: 5px 0;">í•˜ë‹¨ <b>[â‰¡] ë©”ë‰´</b> -> <b>[í˜„ì¬ í˜ì´ì§€ ì¶”ê°€]</b> -> <b>[í™ˆ í™”ë©´]</b>ì„ ëˆ„ë¥´ë©´ ì„¤ì¹˜ë©ë‹ˆë‹¤!</p>
        </div>
    </div>

    <div id="iphoneSection" class="content-section">
        <p>ğŸ <b>ì•„ì´í° ì „ìš© ì„¤ì¹˜</b></p>
        <button id="installProfile" class="big-btn">ì•„ì´í° ë°”ë¡œê°€ê¸° ì„¤ì¹˜í•˜ê¸°</button>
    </div>

    <div id="naverSection" class="content-section">
        <p>âš ï¸ ì„¤ì¹˜ë¥¼ ìœ„í•´ ê¸°ë³¸ ë¸Œë¼ìš°ì €ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
        <button id="exitInApp" class="big-btn">ì„¤ì¹˜ ë¸Œë¼ìš°ì € ì—´ê¸°</button>
    </div>

    <script>
        // [1] ë³€ìˆ˜ ì„ ì–¸ (ì˜¤ë¥˜ ë°©ì§€ ìœ„í•´ ë§¨ ìœ„)
        let deferredPrompt = null;

        // [2] ì„¤ì¹˜ ì‹ í˜¸ ëŒ€ê¸°
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log("ì„¤ì¹˜ ì¤€ë¹„ë¨");
        });

        // [3] í™”ë©´ ë¶„ê¸° ë° ë²„íŠ¼ í‘œì‹œ ë¡œì§
        window.onload = () => {
            const ua = navigator.userAgent.toLowerCase();
            const isIos = /iphone|ipad|ipod/.test(ua);
            const isInApp = /naver|kakaotalk|line/.test(ua);
            const isSamsung = ua.indexOf('samsungbrowser') !== -1;

            // 1. ì¸ì•± ë¸Œë¼ìš°ì € (ë„¤ì´ë²„/ì¹´í†¡ ë“±)
            if (isInApp) {
                document.getElementById('naverSection').style.display = 'block';
                document.getElementById('exitInApp').onclick = () => {
                    location.href = "intent://" + location.host + location.pathname + "#Intent;scheme=https;end";
                };
                return;
            }

            // 2. ì•„ì´í°
            if (isIos) {
                document.getElementById('iphoneSection').style.display = 'block';
                return;
            }

            // 3. ì•ˆë“œë¡œì´ë“œ (ì‚¼ì„±/í¬ë¡¬ ë“±)
            document.getElementById('androidSection').style.display = 'block';
            if (isSamsung) {
                document.getElementById('samsungGuide').style.display = 'block';
            }
        };

        // [4] ì•ˆë“œë¡œì´ë“œ ì„¤ì¹˜ ë²„íŠ¼ ë™ì‘
        document.getElementById('installButton').onclick = async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
            } else {
                alert("ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ìë™ ì„¤ì¹˜ê°€ ë§‰í˜€ìˆìŠµë‹ˆë‹¤.\n\ní™”ë©´ í•˜ë‹¨ [â‰¡] ë©”ë‰´ì—ì„œ 'í˜„ì¬ í˜ì´ì§€ ì¶”ê°€' -> 'í™ˆ í™”ë©´'ì„ ëˆŒëŸ¬ ì§ì ‘ ì„¤ì¹˜í•´ì£¼ì„¸ìš”!");
            }
        };

        // [5] ì•„ì´í° ì„¤ì¹˜ ë²„íŠ¼ (ê¸°ì¡´ í”„ë¡œíŒŒì¼ ì½”ë“œ ì—¬ê¸°ì— ì¶”ê°€)
        document.getElementById('installProfile').onclick = () => {
            alert("ì•„ì´í° ì„¤ì¹˜ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. í—ˆìš©ì„ ëˆ„ë¥¸ í›„ ì„¤ì •ì—ì„œ í”„ë¡œíŒŒì¼ì„ ì„¤ì¹˜í•˜ì„¸ìš”.");
            // ì—¬ê¸°ì— ê¸°ì¡´ mobileconfig ìƒì„± ë¡œì§ì„ ë„£ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤.
        };
    </script>
</body>
</html>
